## 요구사항 정리 📝


### 문서의 목적

- 이 문서에서는 **[ 15조 - 주특기-플러스-프로젝트 ]** 의 요구 사항을 정의합니다.
---

### 문서 기본 정보

- **작성자** : 전탁
- **작성일** : 2025.03.24 (월)
- **수정일** : 2025.03.24 (월)

---

### 로그인 요구사항 - (전탁 작성 2025.03.24)

#### 회원가입
- 이메일, 비밀번호, 이름, 사용자 권한이 존재해야 한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- 비밀번호는 최소 8글자 이상이며 대소문자 포함 영문 + 숫자 + 특수문자를 최소 1글자씩 포함한다.
- 회원가입 시 일반 유저(USER)로 자동 가입 된다.
- 비밀번호는 Bcrypt로 인코딩한다.
- 중복된 이메일로 가입하는 경우 예외 처리한다.
- 가입 성공 시 ApiResponse에 "회원가입에 성공했습니다." 및 bearerToken을 넣어 반환한다.

#### 로그인
- 가입한 이메일과 비밀번호로 로그인한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- 가입되지 않은 유저라면 예외 처리한다.
- 비밀번호가 일치하지 않다면 예외 처리한다.
- 로그인 성공 시 ApiResponse에 "로그인에 성공했습니다." 및 bearerToken을 넣어 반환한다.

---

### 유저 요구사항 - (전탁 작성 2025.03.24)

#### 비밀번호 변경
- 로그인된 유저의 비밀번호를 수정한다.
- 유저를 찾을 수 없다면 예외 처리한다.
- 기존 비밀번호, 새 비밀번호가 존재해야 한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- 새 비밀번호가 기존 비밀번호와 같으면 예외 처리한다.
- 기존 비밀번호와 입력한 비밀번호가 일치하지 않으면 예외 처리한다.
- 수정 성공 시 ApiResponse에 "비밀번호 변경에 성공했습니다."를 넣고 반환한다.

#### 쿠폰 발급
- 쿠폰을 발급 받는다.
- @Auth로 들어온 유저는 USER 이어야 한다.
- 해당 쿠폰이 존재하지 않는다면, 예외처리 한다.
- 해당 쿠폰의 수량이 0이라면, 예외처리 한다.
- 쿠폰 발급이 가능하다면, 유저 쿠폰 중간 테이블에 정보를 생성한다.
- ApiResponse에 "쿠폰이 생성되었습니다."를 넣고 반환한다.

#### 쿠폰 조회
- 유저가 발급한 쿠폰들을 조회한다.
- @Auth로 들어온 유저는 USER 이어야 한다.
- 유저를 찾을 수 없다면 예외 처리한다.
- 조회 성공 시 ApiResponse에 "쿠폰 조회에 성공했습니다." 및 List<CouponResponse>를 넣고 반환한다.


#### 어드민 권한 발급
- Pathvariable로 들어온 유저의 역할을 변경한다.
- @Auth로 들어온 유저는 Admin 이어야 한다.
- 유저를 찾을 수 없다면 예외 처리한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- 어드민 권한 발급 성공 시 ApiResponse에 "권한 변경에 성공했습니다."를 넣고 반환한다.
---

### 쿠폰 요구사항 - (전탁 작성 2025.03.24)

#### 쿠폰 생성
- 쿠폰을 생성한다.
- @Auth로 들어온 유저는 Admin 이어야 한다.
- 이름, 설명, 할인가격, 수량, 시작일, 종료일이 존재해야 한다.
- 각 속성의 요구 조건을 하나라도 만족하지 않으면 예외 처리한다. (@Valid)
- 생성 성공 시 ApiResponse에 "쿠폰이 생성되었습니다."를 넣고 반환한다.
